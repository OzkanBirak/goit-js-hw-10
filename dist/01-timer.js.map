{"version":3,"file":"01-timer.js","sources":["../src/js/01-timer.js"],"sourcesContent":["// 01-timer.js\r\n\r\nimport flatpickr from 'flatpickr';\r\nimport 'flatpickr/dist/flatpickr.min.css';\r\n\r\nimport iziToast from 'izitoast';\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\n\r\nlet userSelectedDate = null;\r\nlet timerInterval = null;\r\n\r\nfunction convertMs(ms) {\r\n  // Number of milliseconds per unit of time\r\n  const second = 1000;\r\n  const minute = second * 60;\r\n  const hour = minute * 60;\r\n  const day = hour * 24;\r\n\r\n  // Remaining days\r\n  const days = Math.floor(ms / day);\r\n  // Remaining hours\r\n  const hours = Math.floor((ms % day) / hour);\r\n  // Remaining minutes\r\n  const minutes = Math.floor(((ms % day) % hour) / minute);\r\n  // Remaining seconds\r\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\r\n\r\n  return { days, hours, minutes, seconds };\r\n}\r\n\r\nconst renderTimer = userDate => {\r\n  const nowDate = new Date();\r\n  const date = new Date(userSelectedDate);\r\n  const timeDifference = new Date(date - nowDate);\r\n  if (timeDifference < 0) {\r\n    clearInterval(timerInterval);\r\n    iziToast.error({\r\n      title: 'Error',\r\n      displayMode: 'once',\r\n      message: 'The selected date has already passed.',\r\n      position: 'topRight',\r\n      timeout: 3000,\r\n    });\r\n    document.getElementById('datetime-picker-submit').disabled = true;\r\n\r\n    return;\r\n  }\r\n  const milliseconds = timeDifference.getTime();\r\n  const convertMsResult = convertMs(milliseconds);\r\n  for (const key in convertMsResult) {\r\n    document.querySelector(`[data-${key}]`).textContent = String(\r\n      convertMsResult[key]\r\n    ).padStart(2, '0');\r\n  }\r\n};\r\n\r\nconst options = {\r\n  enableTime: true,\r\n\r\n  time_24hr: true,\r\n  defaultDate: new Date(),\r\n  minuteIncrement: 1,\r\n  onClose(selectedDates, dateStr, instance) {\r\n    console.log({\r\n      selectedDates,\r\n      dateStr,\r\n      instance,\r\n    });\r\n    userSelectedDate = selectedDates[0];\r\n\r\n    if (userSelectedDate < instance.now) {\r\n      document.getElementById('datetime-picker-submit').disabled = true;\r\n      iziToast.warning({\r\n        title: 'Warning',\r\n        displayMode: 'once',\r\n        message: 'Please choose a date in the future.',\r\n        position: 'topRight',\r\n        timeout: 3000,\r\n      });\r\n    } else {\r\n      document.getElementById('datetime-picker-submit').disabled = false;\r\n      renderTimer(userSelectedDate);\r\n    }\r\n  },\r\n};\r\n\r\nflatpickr('#datetime-picker', options);\r\n\r\ndocument\r\n  .getElementById('datetime-picker-submit')\r\n  .addEventListener('click', e => {\r\n    e.preventDefault();\r\n    timerInterval = setInterval(() => {\r\n      renderTimer(userSelectedDate);\r\n    }, 1000);\r\n  });\r\n"],"names":["userSelectedDate","timerInterval","convertMs","ms","days","hours","minutes","seconds","renderTimer","userDate","nowDate","date","timeDifference","iziToast","milliseconds","convertMsResult","key","options","selectedDates","dateStr","instance","flatpickr"],"mappings":"2FAQA,IAAIA,EAAmB,KACnBC,EAAgB,KAEpB,SAASC,EAAUC,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,MAAMC,EAAcC,GAAY,CAC9B,MAAMC,EAAU,IAAI,KACdC,EAAO,IAAI,KAAKX,CAAgB,EAChCY,EAAiB,IAAI,KAAKD,EAAOD,CAAO,EAC9C,GAAIE,EAAiB,EAAG,CACtB,cAAcX,CAAa,EAC3BY,EAAS,MAAM,CACb,MAAO,QACP,YAAa,OACb,QAAS,wCACT,SAAU,WACV,QAAS,GACf,CAAK,EACD,SAAS,eAAe,wBAAwB,EAAE,SAAW,GAE7D,MACD,CACD,MAAMC,EAAeF,EAAe,UAC9BG,EAAkBb,EAAUY,CAAY,EAC9C,UAAWE,KAAOD,EAChB,SAAS,cAAc,SAASC,CAAG,GAAG,EAAE,YAAc,OACpDD,EAAgBC,CAAG,CACzB,EAAM,SAAS,EAAG,GAAG,CAErB,EAEMC,EAAU,CACd,WAAY,GAEZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAeC,EAASC,EAAU,CACxC,QAAQ,IAAI,CACV,cAAAF,EACA,QAAAC,EACA,SAAAC,CACN,CAAK,EACDpB,EAAmBkB,EAAc,CAAC,EAE9BlB,EAAmBoB,EAAS,KAC9B,SAAS,eAAe,wBAAwB,EAAE,SAAW,GAC7DP,EAAS,QAAQ,CACf,MAAO,UACP,YAAa,OACb,QAAS,sCACT,SAAU,WACV,QAAS,GACjB,CAAO,IAED,SAAS,eAAe,wBAAwB,EAAE,SAAW,GAC7DL,EAA4B,EAE/B,CACH,EAEAa,EAAU,mBAAoBJ,CAAO,EAErC,SACG,eAAe,wBAAwB,EACvC,iBAAiB,QAAS,GAAK,CAC9B,EAAE,eAAc,EAChBhB,EAAgB,YAAY,IAAM,CAChCO,EAA4B,CAC7B,EAAE,GAAI,CACX,CAAG"}